{"version":3,"sources":["views/app-views/planer/Board/Board.module.css","views/app-views/planer/FurnitureList.js","views/app-views/planer/ElementItem.js","views/app-views/planer/ElementList.js","views/app-views/planer/Board/index.js","views/app-views/planer/ImportExport.js","views/app-views/planer/index.js"],"names":["module","exports","FurnitureList","furnitures","useSelector","state","furniture","dispatch","useDispatch","id","useRef","justify","map","item","i","onClick","obj","addFur","current","objId","className","style","display","alignItems","justifyContent","backgroundColor","width","height","src","alt","name","textAlign","ElementItem","element","useState","editElement","setEditElement","onChange","e","propertyName","target","value","editValue","title","extra","danger","icon","DeleteOutlined","deleteFur","size","gutter","xs","x","y","ElementList","board","length","nanoid","reverse","Board","data","styles","elem","allowAnyClick","bounds","defaultPosition","onStop","moveData","elemObj","newFurObj","editFur","handleDragEnd","ImportExport","fileRef","type","shape","block","fileName","Utils","exportDataToTXT","handleExport","click","ref","file","files","importTXTToData","addFurs","hidden","Planer","md","flexDirection","overflow","bodyStyle","flexGrow","padding"],"mappings":"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","file":"static/js/14.4b447b9e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"board\":\"Board_board__35d__\",\"item\":\"Board_item__2HAlq\"};","import { useDispatch, useSelector } from 'react-redux';\r\nimport { addFur } from 'redux/reducers/Furniture';\r\nimport { Col, Row } from 'antd';\r\nimport { useRef } from 'react';\r\n\r\nconst FurnitureList = () => {\r\n\r\n\tconst furnitures = useSelector(state => state.furniture.furniture);\r\n\tconst dispatch = useDispatch();\r\n\tlet id = useRef(1);\r\n\r\n\tconst onClickAddElement = (obj) => {\r\n\t\tdispatch(addFur({...obj, id: id.current, objId: obj.id}))\r\n\t\tid.current++\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Row justify='space-between'>\r\n\t\t\t{furnitures.map((item, i) => (\r\n\t\t\t\t<Col \r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tonClick={() => onClickAddElement(item)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div \r\n\t\t\t\t\t\tclassName='mb-2'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: 'flex', \r\n\t\t\t\t\t\t\talignItems:'center', \r\n\t\t\t\t\t\t\tjustifyContent: 'center', \r\n\t\t\t\t\t\t\tbackgroundColor: 'black', \r\n\t\t\t\t\t\t\twidth: \"80px\", \r\n\t\t\t\t\t\t\theight: \"80px\"\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<img width={item.width} src={item.src} alt={item.name} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p style={{textAlign: 'center'}}>{item.name}</p>\r\n\t\t\t\t</Col>\r\n\t\t\t))}\r\n\t\t</Row>\r\n\t)\r\n\r\n}\r\n\r\nexport default FurnitureList;","import { Button, Card, Col, Input, Row } from 'antd';\r\nimport { DeleteOutlined } from '@ant-design/icons';\r\nimport { useState } from 'react';\r\nimport { deleteFur, editValue } from 'redux/reducers/Furniture';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst ElementItem = ({element}) => {\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst [editElement, setEditElement] = useState({});\r\n\r\n\tconst onChange = (e, obj, propertyName) => {\r\n\r\n\t\tsetEditElement(state => ({\r\n\t\t\t...state,\r\n\t\t\t...obj,\r\n\t\t\t[propertyName]: +e.target.value\r\n\t\t}))\r\n\r\n\t\tdispatch(editValue({obj, propertyName, value: +e.target.value}))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Card \r\n\t\t\ttitle={`Параметры элемента ${element.name}`}  \r\n\t\t\textra={<Button danger icon={<DeleteOutlined />} onClick={()=> dispatch(deleteFur(element.id))} size=\"small\"/>} \r\n\t\t>\r\n\t\t\t<Row gutter={6}>\r\n\t\t\t\t<Col xs={12}>\r\n\t\t\t\t\tX\r\n\t\t\t\t\t<Input \r\n\t\t\t\t\t\tname='x' \r\n\t\t\t\t\t\tvalue={editElement.x || element.x} \r\n\t\t\t\t\t\tonChange={(e) => onChange(e, element, 'x')} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={12}>\r\n\t\t\t\t\tY\r\n\t\t\t\t\t<Input \r\n\t\t\t\t\t\tname='y' \r\n\t\t\t\t\t\tvalue={editElement.y || element.y} \r\n\t\t\t\t\t\tonChange={(e) => onChange(e, element, 'y')} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row gutter={6}>\r\n\t\t\t\t<Col xs={12}>\r\n\t\t\t\t\tШирина\r\n\t\t\t\t\t<Input \r\n\t\t\t\t\t\tname='width' \r\n\t\t\t\t\t\tvalue={editElement.width || element.width} \r\n\t\t\t\t\t\tonChange={(e) => onChange(e, element, 'width')} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={12}>\r\n\t\t\t\t\tВысота\r\n\t\t\t\t\t<Input \r\n\t\t\t\t\t\tname='height' \r\n\t\t\t\t\t\tvalue={editElement.height || element.height} \r\n\t\t\t\t\t\tonChange={(e) => onChange(e, element, 'height')} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nexport default ElementItem;","import { useSelector } from 'react-redux';\r\nimport ElementItem from './ElementItem';\r\nimport { nanoid } from '@reduxjs/toolkit';\r\n\r\nconst ElementList = () => {\r\n\r\n\tconst furniture = useSelector(state => state.furniture.board);\r\n\r\n\tif (furniture.length === 0) return null;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{furniture.map(item => <ElementItem key={nanoid()} element={item} />).reverse()}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ElementList;","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { nanoid } from '@reduxjs/toolkit';\r\nimport Draggable from 'react-draggable';\r\nimport { editFur } from 'redux/reducers/Furniture';\r\n\r\nimport styles from './Board.module.css';\r\n\r\nconst Board = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const furnitures = useSelector(state => state.furniture.board);\r\n\r\n    const handleDragEnd = (elemObj, moveData) => {\r\n        const newFurObj = {\r\n            ...elemObj,\r\n            x: moveData.x,\r\n            y: moveData.y\r\n        }\r\n\r\n        dispatch(editFur(newFurObj))\r\n    }\r\n\r\n    const renderFurs = (data) => {\r\n        return data.map(elem => (\r\n            <Draggable\r\n                key={nanoid()}\r\n                allowAnyClick={true}\r\n                bounds=\"parent\"\r\n                defaultPosition={{x: elem.x, y: elem.y}}\r\n                onStop={(e, moveData) => handleDragEnd(elem, moveData)}\r\n            >\r\n                <div className={styles.item} style={{\r\n                    width: `${elem.width}px`,\r\n                    height: `${elem.height}px`\r\n                }}>\r\n                    <img \r\n                        src={elem.src}\r\n                        alt={elem.name}\r\n                    />\r\n                </div>\r\n            </Draggable>\r\n        ))\r\n    }\r\n\r\n    return (\r\n        <div className={styles.board}>\r\n            {renderFurs(furnitures)}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Board;","import { Button, Col, Row } from 'antd';\r\nimport React from 'react';\r\nimport { useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addFurs } from 'redux/reducers/Furniture';\r\nimport Utils from 'utils';\r\n\r\nconst ImportExport = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const furnitures = useSelector(state => state.furniture.board);\r\n    const fileRef = useRef(null);\r\n    \r\n    const handleExport = (data, fileName = 'planner-coords') => {\r\n        if (!data) return;\r\n\r\n        Utils.exportDataToTXT(data.map(item => {\r\n            return {\r\n                id: item.objId,\r\n                x: item.x,\r\n                y: item.y,\r\n                width: item.width,\r\n                height: item.height\r\n            }\r\n        }), fileName);\r\n    }\r\n\r\n    const handleImport = () => {\r\n        if (!fileRef) return\r\n\r\n        fileRef.current.click();\r\n    }\r\n\r\n    const handleInputChange = (e) => {\r\n        const file = e.target.files[0];\r\n\r\n        function fileHandler(file) {\r\n            dispatch(addFurs(file))\r\n        }\r\n\r\n        Utils.importTXTToData(file, fileHandler)\r\n\r\n        e.target.value = '';\r\n    }\r\n\r\n    return (\r\n        <Row gutter={6} className='mb-4'>\r\n            <Col xs={12} >\r\n                <Button \r\n                    type=\"primary\" \r\n                    shape=\"round\" \r\n                    className='mr-2'\r\n                    block\r\n                    onClick={() => handleExport(furnitures)}\r\n                >\r\n                    Сохранить\r\n                </Button>\r\n            </Col>\r\n            <Col xs={12} >\r\n                <Button \r\n                    type=\"primary\" \r\n                    shape=\"round\" \r\n                    danger\r\n                    block\r\n                    onClick={handleImport}\r\n                >\r\n                    Загрузить\r\n                </Button>\r\n            </Col>\r\n            <input ref={fileRef} type='file' onChange={handleInputChange} hidden />\r\n        </Row>\r\n    );\r\n};\r\n\r\nexport default ImportExport;","import { Card, Col, Row } from 'antd';\r\nimport React from 'react';\r\nimport FurnitureList from './FurnitureList';\r\nimport ElementList from './ElementList';\r\nimport Board from './Board';\r\nimport ImportExport from './ImportExport';\r\n\r\nconst Planer = () => {\r\n\r\n\treturn (\r\n\t\t<Row gutter={6} style={{height: '100%'}}>\r\n\t\t\t<Col xs={24} md={8}>\r\n\t\t\t\t<Card title=\"Элементы\">\r\n\t\t\t\t\t<FurnitureList />\r\n\t\t\t\t</Card>\r\n\t\t\t\t<ImportExport />\r\n\t\t\t\t<ElementList />\r\n\t\t\t</Col>\r\n\t\t\t<Col xs={24} md={16}>\r\n\t\t\t\t<Card \r\n\t\t\t\t\ttitle={'Конструктор'} \r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\tflexDirection: 'column',\r\n\t\t\t\t\t\toverflow: 'hidden', \r\n\t\t\t\t\t\theight: '100%'\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tbodyStyle={{\r\n\t\t\t\t\t\tflexGrow: 1,\r\n\t\t\t\t\t\tpadding: '20px 0 0'\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Board />\r\n\t\t\t\t</Card>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t)\r\n}\r\n\r\nexport default Planer\r\n"],"sourceRoot":""}